"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createLogger = exports.addTraceFormat = void 0;
const winston = require("winston");
const trace_1 = require("../trace");
exports.addTraceFormat = winston.format((info) => {
    const trace = (0, trace_1.getContextTrace)();
    if (trace && !info.trace) {
        info.trace = trace.toString();
    }
    return info;
});
const createLogger = (service, level) => winston.createLogger({
    level: level || 'info',
    format: winston.format.combine((0, exports.addTraceFormat)(), winston.format.timestamp(), winston.format.colorize(), winston.format.simple()),
    defaultMeta: { service: service },
    transports: [new winston.transports.Console()],
});
exports.createLogger = createLogger;
//# sourceMappingURL=logger.js.map