{"version":3,"file":"getAPIInnerErrors.js","sources":["../../../admin/src/utils/getAPIInnerErrors.ts"],"sourcesContent":["import { normalizeAPIError } from './normalizeAPIError';\n\nimport type { FetchError } from '@strapi/admin/strapi-admin';\nimport type { MessageDescriptor } from 'react-intl';\n\ntype GetAPIInnerErrorsReturn = {\n  [key: string]: MessageDescriptor;\n};\n\n/**\n *\n * Returns a normalized error message\n *\n */\nexport function getAPIInnerErrors(\n  error: FetchError,\n  { getTrad }: { getTrad: (key: string) => string }\n) {\n  const normalizedError = normalizeAPIError(error, getTrad);\n\n  if (normalizedError && 'errors' in normalizedError) {\n    return normalizedError.errors.reduce<GetAPIInnerErrorsReturn>((acc, error) => {\n      if ('path' in error.values) {\n        acc[error.values.path] = {\n          id: error.id,\n          defaultMessage: error.defaultMessage,\n        };\n      }\n\n      return acc;\n    }, {});\n  }\n\n  return normalizedError?.defaultMessage;\n}\n"],"names":["getAPIInnerErrors","error","getTrad","normalizedError","normalizeAPIError","errors","reduce","acc","values","path","id","defaultMessage"],"mappings":";;;;AASA;;;;AAIC,IACM,SAASA,iBAAAA,CACdC,KAAiB,EACjB,EAAEC,OAAO,EAAwC,EAAA;IAEjD,MAAMC,eAAAA,GAAkBC,oCAAkBH,KAAOC,EAAAA,OAAAA,CAAAA;IAEjD,IAAIC,eAAAA,IAAmB,YAAYA,eAAiB,EAAA;AAClD,QAAA,OAAOA,gBAAgBE,MAAM,CAACC,MAAM,CAA0B,CAACC,GAAKN,EAAAA,KAAAA,GAAAA;YAClE,IAAI,MAAA,IAAUA,KAAMO,CAAAA,MAAM,EAAE;AAC1BD,gBAAAA,GAAG,CAACN,KAAMO,CAAAA,MAAM,CAACC,IAAI,CAAC,GAAG;AACvBC,oBAAAA,EAAAA,EAAIT,MAAMS,EAAE;AACZC,oBAAAA,cAAAA,EAAgBV,MAAMU;AACxB,iBAAA;AACF;YAEA,OAAOJ,GAAAA;AACT,SAAA,EAAG,EAAC,CAAA;AACN;AAEA,IAAA,OAAOJ,eAAiBQ,EAAAA,cAAAA;AAC1B;;;;"}