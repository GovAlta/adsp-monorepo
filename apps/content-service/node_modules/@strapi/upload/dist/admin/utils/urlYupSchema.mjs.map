{"version":3,"file":"urlYupSchema.mjs","sources":["../../../admin/src/utils/urlYupSchema.ts"],"sourcesContent":["import { translatedErrors as errorsTrads } from '@strapi/admin/strapi-admin';\nimport * as yup from 'yup';\n\nimport { getTrad } from './getTrad';\n\nexport const urlSchema = yup.object().shape({\n  urls: yup.string().test({\n    name: 'isUrlValid',\n    // eslint-disable-next-line no-template-curly-in-string\n    message: '${path}',\n    test(values = '') {\n      const urls = values.split(/\\r?\\n/);\n\n      if (urls.length === 0) {\n        return this.createError({\n          path: this.path,\n          message: errorsTrads.min.id,\n        });\n      }\n\n      if (urls.length > 20) {\n        return this.createError({\n          path: this.path,\n          message: errorsTrads.max.id,\n        });\n      }\n\n      const filtered = urls.filter((val) => {\n        try {\n          // eslint-disable-next-line no-new\n          new URL(val);\n\n          return false;\n        } catch (err) {\n          // invalid url\n          return true;\n        }\n      });\n\n      const filteredLength = filtered.length;\n\n      if (filteredLength === 0) {\n        return true;\n      }\n\n      const errorMessage =\n        filteredLength > 1\n          ? 'form.upload-url.error.url.invalids'\n          : 'form.upload-url.error.url.invalid';\n\n      return this.createError({\n        path: this.path,\n        message: getTrad(errorMessage),\n        params: { number: filtered.length },\n      });\n    },\n  }),\n});\n"],"names":["urlSchema","yup","object","shape","urls","string","test","name","message","values","split","length","createError","path","errorsTrads","min","id","max","filtered","filter","val","URL","err","filteredLength","errorMessage","getTrad","params","number"],"mappings":";;;;MAKaA,SAAYC,GAAAA,GAAAA,CAAIC,MAAM,EAAA,CAAGC,KAAK,CAAC;AAC1CC,IAAAA,IAAAA,EAAMH,GAAII,CAAAA,MAAM,EAAGC,CAAAA,IAAI,CAAC;QACtBC,IAAM,EAAA,YAAA;;QAENC,OAAS,EAAA,SAAA;AACTF,QAAAA,IAAAA,CAAAA,CAAKG,SAAS,EAAE,EAAA;YACd,MAAML,IAAAA,GAAOK,MAAOC,CAAAA,KAAK,CAAC,OAAA,CAAA;YAE1B,IAAIN,IAAAA,CAAKO,MAAM,KAAK,CAAG,EAAA;gBACrB,OAAO,IAAI,CAACC,WAAW,CAAC;oBACtBC,IAAM,EAAA,IAAI,CAACA,IAAI;oBACfL,OAASM,EAAAA,gBAAAA,CAAYC,GAAG,CAACC;AAC3B,iBAAA,CAAA;AACF;YAEA,IAAIZ,IAAAA,CAAKO,MAAM,GAAG,EAAI,EAAA;gBACpB,OAAO,IAAI,CAACC,WAAW,CAAC;oBACtBC,IAAM,EAAA,IAAI,CAACA,IAAI;oBACfL,OAASM,EAAAA,gBAAAA,CAAYG,GAAG,CAACD;AAC3B,iBAAA,CAAA;AACF;AAEA,YAAA,MAAME,QAAWd,GAAAA,IAAAA,CAAKe,MAAM,CAAC,CAACC,GAAAA,GAAAA;gBAC5B,IAAI;;AAEF,oBAAA,IAAIC,GAAID,CAAAA,GAAAA,CAAAA;oBAER,OAAO,KAAA;AACT,iBAAA,CAAE,OAAOE,GAAK,EAAA;;oBAEZ,OAAO,IAAA;AACT;AACF,aAAA,CAAA;YAEA,MAAMC,cAAAA,GAAiBL,SAASP,MAAM;AAEtC,YAAA,IAAIY,mBAAmB,CAAG,EAAA;gBACxB,OAAO,IAAA;AACT;YAEA,MAAMC,YAAAA,GACJD,cAAiB,GAAA,CAAA,GACb,oCACA,GAAA,mCAAA;YAEN,OAAO,IAAI,CAACX,WAAW,CAAC;gBACtBC,IAAM,EAAA,IAAI,CAACA,IAAI;AACfL,gBAAAA,OAAAA,EAASiB,OAAQD,CAAAA,YAAAA,CAAAA;gBACjBE,MAAQ,EAAA;AAAEC,oBAAAA,MAAAA,EAAQT,SAASP;AAAO;AACpC,aAAA,CAAA;AACF;AACF,KAAA;AACF,CAAG;;;;"}