{"version":3,"file":"PreviewCell.mjs","sources":["../../../../admin/src/components/TableList/PreviewCell.tsx"],"sourcesContent":["import { Avatar, Box, Flex } from '@strapi/design-system';\nimport {\n  File as FileIcon,\n  FileCsv,\n  FilePdf,\n  FileXls,\n  FileZip,\n  Folder,\n  VolumeUp,\n} from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { AssetType } from '../../constants';\nimport {\n  createAssetUrl,\n  getFileExtension,\n  getTrad,\n  prefixFileUrlWithBackendUrl,\n} from '../../utils';\nimport { VideoPreview } from '../AssetCard/VideoPreview';\n\nimport type { File } from '../../../../shared/contracts/files';\n\nconst VideoPreviewWrapper = styled(Box)`\n  figure {\n    width: ${({ theme }) => theme.spaces[7]};\n    height: ${({ theme }) => theme.spaces[7]};\n  }\n\n  canvas,\n  video {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 50%;\n  }\n`;\n\ninterface PreviewCellProps {\n  content: File;\n  type?: string;\n}\n\nexport const PreviewCell = ({ type, content }: PreviewCellProps) => {\n  const { formatMessage } = useIntl();\n  if (type === 'folder') {\n    return (\n      <Flex\n        justifyContent=\"center\"\n        background=\"secondary100\"\n        width=\"3.2rem\"\n        height=\"3.2rem\"\n        borderRadius=\"50%\"\n      >\n        <Folder\n          aria-label={formatMessage({\n            id: getTrad('header.actions.add-assets.folder'),\n            defaultMessage: 'folder',\n          })}\n          fill=\"secondary500\"\n          width=\"1.6rem\"\n          height=\"1.6rem\"\n        />\n      </Flex>\n    );\n  }\n\n  const { alternativeText, ext, formats, mime, name, url } = content;\n\n  const fileExtension = getFileExtension(ext);\n\n  if (mime?.includes(AssetType.Image)) {\n    const mediaURL =\n      prefixFileUrlWithBackendUrl(formats?.thumbnail?.url) ?? prefixFileUrlWithBackendUrl(url);\n\n    return (\n      <Avatar.Item\n        src={mediaURL}\n        alt={alternativeText || undefined}\n        preview\n        fallback={alternativeText}\n      />\n    );\n  }\n\n  if (mime?.includes(AssetType.Video)) {\n    return (\n      <VideoPreviewWrapper>\n        <VideoPreview\n          url={createAssetUrl(content, true) || ''}\n          mime={mime}\n          alt={alternativeText ?? name}\n        />\n      </VideoPreviewWrapper>\n    );\n  }\n\n  if (mime?.includes(AssetType.Audio)) {\n    return (\n      <Flex\n        background=\"neutral100\"\n        borderRadius=\"100%\"\n        color=\"neutral500\"\n        width=\"3.2rem\"\n        height=\"3.2rem\"\n        justifyContent=\"center\"\n      >\n        <VolumeUp width={16} height={16} />\n      </Flex>\n    );\n  }\n\n  type IconComponent = typeof FileIcon;\n  const DOC_ICON_MAP: Record<string, IconComponent> = {\n    pdf: FilePdf,\n    csv: FileCsv,\n    xls: FileXls,\n    zip: FileZip,\n  };\n\n  const DocIcon = fileExtension ? DOC_ICON_MAP[fileExtension] || FileIcon : FileIcon;\n  const testId =\n    fileExtension && DOC_ICON_MAP[fileExtension] ? `file-${fileExtension}-icon` : 'file-icon';\n\n  return (\n    <Flex\n      justifyContent=\"center\"\n      borderRadius=\"100%\"\n      background=\"neutral100\"\n      color=\"neutral500\"\n      width=\"3.2rem\"\n      height=\"3.2rem\"\n    >\n      <DocIcon width={16} height={16} data-testid={testId} />\n    </Flex>\n  );\n};\n"],"names":["VideoPreviewWrapper","styled","Box","theme","spaces","PreviewCell","type","content","formatMessage","useIntl","_jsx","Flex","justifyContent","background","width","height","borderRadius","Folder","aria-label","id","getTrad","defaultMessage","fill","alternativeText","ext","formats","mime","name","url","fileExtension","getFileExtension","includes","AssetType","Image","mediaURL","prefixFileUrlWithBackendUrl","thumbnail","Avatar","Item","src","alt","undefined","preview","fallback","Video","VideoPreview","createAssetUrl","Audio","color","VolumeUp","DOC_ICON_MAP","pdf","FilePdf","csv","FileCsv","xls","FileXls","zip","FileZip","DocIcon","FileIcon","testId","data-testid"],"mappings":";;;;;;;;;;;;;;;;AAwBA,MAAMA,mBAAAA,GAAsBC,MAAOC,CAAAA,GAAAA,CAAI;;WAE5B,EAAE,CAAC,EAAEC,KAAK,EAAE,GAAKA,KAAMC,CAAAA,MAAM,CAAC,CAAA,CAAE,CAAC;YAChC,EAAE,CAAC,EAAED,KAAK,EAAE,GAAKA,KAAMC,CAAAA,MAAM,CAAC,CAAA,CAAE,CAAC;;;;;;;;;;AAU7C,CAAC;MAOYC,WAAc,GAAA,CAAC,EAAEC,IAAI,EAAEC,OAAO,EAAoB,GAAA;IAC7D,MAAM,EAAEC,aAAa,EAAE,GAAGC,OAAAA,EAAAA;AAC1B,IAAA,IAAIH,SAAS,QAAU,EAAA;AACrB,QAAA,qBACEI,GAACC,CAAAA,IAAAA,EAAAA;YACCC,cAAe,EAAA,QAAA;YACfC,UAAW,EAAA,cAAA;YACXC,KAAM,EAAA,QAAA;YACNC,MAAO,EAAA,QAAA;YACPC,YAAa,EAAA,KAAA;AAEb,YAAA,QAAA,gBAAAN,GAACO,CAAAA,MAAAA,EAAAA;AACCC,gBAAAA,YAAAA,EAAYV,aAAc,CAAA;AACxBW,oBAAAA,EAAAA,EAAIC,OAAQ,CAAA,kCAAA,CAAA;oBACZC,cAAgB,EAAA;AAClB,iBAAA,CAAA;gBACAC,IAAK,EAAA,cAAA;gBACLR,KAAM,EAAA,QAAA;gBACNC,MAAO,EAAA;;;AAIf;AAEA,IAAA,MAAM,EAAEQ,eAAe,EAAEC,GAAG,EAAEC,OAAO,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAE,GAAGrB,OAAAA;AAE3D,IAAA,MAAMsB,gBAAgBC,gBAAiBN,CAAAA,GAAAA,CAAAA;AAEvC,IAAA,IAAIE,IAAMK,EAAAA,QAAAA,CAASC,SAAUC,CAAAA,KAAK,CAAG,EAAA;AACnC,QAAA,MAAMC,QACJC,GAAAA,2BAAAA,CAA4BV,OAASW,EAAAA,SAAAA,EAAWR,QAAQO,2BAA4BP,CAAAA,GAAAA,CAAAA;QAEtF,qBACElB,GAAA,CAAC2B,OAAOC,IAAI,EAAA;YACVC,GAAKL,EAAAA,QAAAA;AACLM,YAAAA,GAAAA,EAAKjB,eAAmBkB,IAAAA,SAAAA;YACxBC,OAAO,EAAA,IAAA;YACPC,QAAUpB,EAAAA;;AAGhB;AAEA,IAAA,IAAIG,IAAMK,EAAAA,QAAAA,CAASC,SAAUY,CAAAA,KAAK,CAAG,EAAA;AACnC,QAAA,qBACElC,GAACV,CAAAA,mBAAAA,EAAAA;AACC,YAAA,QAAA,gBAAAU,GAACmC,CAAAA,YAAAA,EAAAA;gBACCjB,GAAKkB,EAAAA,cAAAA,CAAevC,SAAS,IAAS,CAAA,IAAA,EAAA;gBACtCmB,IAAMA,EAAAA,IAAAA;AACNc,gBAAAA,GAAAA,EAAKjB,eAAmBI,IAAAA;;;AAIhC;AAEA,IAAA,IAAID,IAAMK,EAAAA,QAAAA,CAASC,SAAUe,CAAAA,KAAK,CAAG,EAAA;AACnC,QAAA,qBACErC,GAACC,CAAAA,IAAAA,EAAAA;YACCE,UAAW,EAAA,YAAA;YACXG,YAAa,EAAA,MAAA;YACbgC,KAAM,EAAA,YAAA;YACNlC,KAAM,EAAA,QAAA;YACNC,MAAO,EAAA,QAAA;YACPH,cAAe,EAAA,QAAA;AAEf,YAAA,QAAA,gBAAAF,GAACuC,CAAAA,QAAAA,EAAAA;gBAASnC,KAAO,EAAA,EAAA;gBAAIC,MAAQ,EAAA;;;AAGnC;AAGA,IAAA,MAAMmC,YAA8C,GAAA;QAClDC,GAAKC,EAAAA,OAAAA;QACLC,GAAKC,EAAAA,OAAAA;QACLC,GAAKC,EAAAA,OAAAA;QACLC,GAAKC,EAAAA;AACP,KAAA;AAEA,IAAA,MAAMC,UAAU9B,aAAgBqB,GAAAA,YAAY,CAACrB,aAAAA,CAAc,IAAI+B,IAAWA,GAAAA,IAAAA;AAC1E,IAAA,MAAMC,MACJhC,GAAAA,aAAAA,IAAiBqB,YAAY,CAACrB,aAAc,CAAA,GAAG,CAAC,KAAK,EAAEA,aAAAA,CAAc,KAAK,CAAC,GAAG,WAAA;AAEhF,IAAA,qBACEnB,GAACC,CAAAA,IAAAA,EAAAA;QACCC,cAAe,EAAA,QAAA;QACfI,YAAa,EAAA,MAAA;QACbH,UAAW,EAAA,YAAA;QACXmC,KAAM,EAAA,YAAA;QACNlC,KAAM,EAAA,QAAA;QACNC,MAAO,EAAA,QAAA;AAEP,QAAA,QAAA,gBAAAL,GAACiD,CAAAA,OAAAA,EAAAA;YAAQ7C,KAAO,EAAA,EAAA;YAAIC,MAAQ,EAAA,EAAA;YAAI+C,aAAaD,EAAAA;;;AAGnD;;;;"}