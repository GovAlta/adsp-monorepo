{"version":3,"file":"file.mjs","sources":["../../../server/src/content-types/file.ts"],"sourcesContent":["import type { Struct } from '@strapi/types';\n\nimport { FOLDER_MODEL_UID } from '../constants';\n\nexport default {\n  schema: {\n    collectionName: 'files',\n    info: {\n      singularName: 'file',\n      pluralName: 'files',\n      displayName: 'File',\n      description: '',\n    },\n    options: {},\n    pluginOptions: {\n      'content-manager': {\n        visible: false,\n      },\n      'content-type-builder': {\n        visible: false,\n      },\n    },\n    attributes: {\n      name: {\n        type: 'string',\n        configurable: false,\n        required: true,\n      },\n      alternativeText: {\n        type: 'string',\n        configurable: false,\n      },\n      caption: {\n        type: 'string',\n        configurable: false,\n      },\n      width: {\n        type: 'integer',\n        configurable: false,\n      },\n      height: {\n        type: 'integer',\n        configurable: false,\n      },\n      formats: {\n        type: 'json',\n        configurable: false,\n      },\n      hash: {\n        type: 'string',\n        configurable: false,\n        required: true,\n      },\n      ext: {\n        type: 'string',\n        configurable: false,\n      },\n      mime: {\n        type: 'string',\n        configurable: false,\n        required: true,\n      },\n      size: {\n        type: 'decimal',\n        configurable: false,\n        required: true,\n      },\n      url: {\n        type: 'string',\n        configurable: false,\n        required: true,\n      },\n      previewUrl: {\n        type: 'string',\n        configurable: false,\n      },\n      provider: {\n        type: 'string',\n        configurable: false,\n        required: true,\n      },\n      provider_metadata: {\n        type: 'json',\n        configurable: false,\n      },\n      related: {\n        type: 'relation',\n        relation: 'morphToMany',\n        configurable: false,\n      },\n      folder: {\n        type: 'relation',\n        relation: 'manyToOne',\n        target: FOLDER_MODEL_UID,\n        inversedBy: 'files',\n        private: true,\n      },\n      folderPath: {\n        type: 'string',\n        minLength: 1,\n        required: true,\n        private: true,\n        searchable: false,\n      },\n    },\n    // experimental feature:\n    indexes: [\n      {\n        name: 'upload_files_folder_path_index',\n        columns: ['folder_path'],\n        type: null,\n      },\n      {\n        name: `upload_files_created_at_index`,\n        columns: ['created_at'],\n        type: null,\n      },\n      {\n        name: `upload_files_updated_at_index`,\n        columns: ['updated_at'],\n        type: null,\n      },\n      {\n        name: `upload_files_name_index`,\n        columns: ['name'],\n        type: null,\n      },\n      {\n        name: `upload_files_size_index`,\n        columns: ['size'],\n        type: null,\n      },\n      {\n        name: `upload_files_ext_index`,\n        columns: ['ext'],\n        type: null,\n      },\n    ],\n  } satisfies Partial<Struct.CollectionTypeSchema>,\n};\n"],"names":["schema","collectionName","info","singularName","pluralName","displayName","description","options","pluginOptions","visible","attributes","name","type","configurable","required","alternativeText","caption","width","height","formats","hash","ext","mime","size","url","previewUrl","provider","provider_metadata","related","relation","folder","target","FOLDER_MODEL_UID","inversedBy","private","folderPath","minLength","searchable","indexes","columns"],"mappings":"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"}