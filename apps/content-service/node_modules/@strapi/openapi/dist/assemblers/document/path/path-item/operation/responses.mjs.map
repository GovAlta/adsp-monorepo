{"version":3,"file":"responses.mjs","sources":["../../../../../../src/assemblers/document/path/path-item/operation/responses.ts"],"sourcesContent":["import type { Core } from '@strapi/types';\nimport type { OpenAPIV3_1 } from 'openapi-types';\nimport type { Assembler } from '../../../..';\nimport type { OperationContext } from '../../../../../types';\nimport { zodToOpenAPI } from '../../../../../utils';\n\nexport class OperationResponsesAssembler implements Assembler.Operation {\n  private get _errors() {\n    return {\n      400: { description: 'Bad request' },\n      401: { description: 'Unauthorized' },\n      403: { description: 'Forbidden' },\n      404: { description: 'Not found' },\n      500: { description: 'Internal server error' },\n    };\n  }\n\n  assemble(context: OperationContext, route: Core.Route): void {\n    const { output } = context;\n\n    const responses = { ...output.data.responses } satisfies OpenAPIV3_1.ResponsesObject;\n\n    // Register common error responses first to allow manual overrides\n    for (const [errorCode, response] of Object.entries(this._errors)) {\n      responses[errorCode] = response;\n    }\n\n    if (route.response) {\n      const schema = zodToOpenAPI(route.response);\n\n      responses[200] = {\n        description: 'OK',\n        content: { 'application/json': { schema } },\n      };\n    }\n\n    output.data.responses = responses;\n  }\n}\n"],"names":["OperationResponsesAssembler","_errors","description","assemble","context","route","output","responses","data","errorCode","response","Object","entries","schema","zodToOpenAPI","content"],"mappings":";;;AAMO,MAAMA,2BAAAA,CAAAA;AACX,IAAA,IAAYC,OAAU,GAAA;QACpB,OAAO;YACL,GAAK,EAAA;gBAAEC,WAAa,EAAA;AAAc,aAAA;YAClC,GAAK,EAAA;gBAAEA,WAAa,EAAA;AAAe,aAAA;YACnC,GAAK,EAAA;gBAAEA,WAAa,EAAA;AAAY,aAAA;YAChC,GAAK,EAAA;gBAAEA,WAAa,EAAA;AAAY,aAAA;YAChC,GAAK,EAAA;gBAAEA,WAAa,EAAA;AAAwB;AAC9C,SAAA;AACF;IAEAC,QAASC,CAAAA,OAAyB,EAAEC,KAAiB,EAAQ;QAC3D,MAAM,EAAEC,MAAM,EAAE,GAAGF,OAAAA;AAEnB,QAAA,MAAMG,SAAY,GAAA;YAAE,GAAGD,MAAAA,CAAOE,IAAI,CAACD;AAAU,SAAA;;QAG7C,KAAK,MAAM,CAACE,SAAAA,EAAWC,QAAS,CAAA,IAAIC,MAAOC,CAAAA,OAAO,CAAC,IAAI,CAACX,OAAO,CAAG,CAAA;YAChEM,SAAS,CAACE,UAAU,GAAGC,QAAAA;AACzB;QAEA,IAAIL,KAAAA,CAAMK,QAAQ,EAAE;YAClB,MAAMG,MAAAA,GAASC,YAAaT,CAAAA,KAAAA,CAAMK,QAAQ,CAAA;YAE1CH,SAAS,CAAC,IAAI,GAAG;gBACfL,WAAa,EAAA,IAAA;gBACba,OAAS,EAAA;oBAAE,kBAAoB,EAAA;AAAEF,wBAAAA;AAAO;AAAE;AAC5C,aAAA;AACF;QAEAP,MAAOE,CAAAA,IAAI,CAACD,SAAS,GAAGA,SAAAA;AAC1B;AACF;;;;"}