{"version":3,"file":"settings.mjs","sources":["../../../server/src/controllers/settings.ts"],"sourcesContent":["/**\n * Used to store user configurations related to releases.\n * E.g the default timezone for the release schedule.\n */\nimport type Koa from 'koa';\n\nimport type { GetSettings, UpdateSettings, Settings } from '../../../shared/contracts/settings';\nimport { getService } from '../utils';\nimport { validateSettings } from './validation/settings';\n\nconst settingsController = {\n  async find(ctx: Koa.Context) {\n    // Get settings\n    const settingsService = getService('settings', { strapi });\n    const settings = await settingsService.find();\n\n    // Response\n    ctx.body = { data: settings } satisfies GetSettings.Response;\n  },\n\n  async update(ctx: Koa.Context) {\n    // Data validation\n    const settingsBody = ctx.request.body;\n    const settings = (await validateSettings(settingsBody)) as Settings;\n\n    // Update\n    const settingsService = getService('settings', { strapi });\n    const updatedSettings = await settingsService.update({ settings });\n\n    // Response\n    ctx.body = { data: updatedSettings } satisfies UpdateSettings.Response;\n  },\n};\n\nexport default settingsController;\n"],"names":["settingsController","find","ctx","settingsService","getService","strapi","settings","body","data","update","settingsBody","request","validateSettings","updatedSettings"],"mappings":";;;AAUA,MAAMA,kBAAqB,GAAA;AACzB,IAAA,MAAMC,MAAKC,GAAgB,EAAA;;QAEzB,MAAMC,eAAAA,GAAkBC,WAAW,UAAY,EAAA;AAAEC,YAAAA;AAAO,SAAA,CAAA;QACxD,MAAMC,QAAAA,GAAW,MAAMH,eAAAA,CAAgBF,IAAI,EAAA;;AAG3CC,QAAAA,GAAAA,CAAIK,IAAI,GAAG;YAAEC,IAAMF,EAAAA;AAAS,SAAA;AAC9B,KAAA;AAEA,IAAA,MAAMG,QAAOP,GAAgB,EAAA;;AAE3B,QAAA,MAAMQ,YAAeR,GAAAA,GAAAA,CAAIS,OAAO,CAACJ,IAAI;QACrC,MAAMD,QAAAA,GAAY,MAAMM,gBAAiBF,CAAAA,YAAAA,CAAAA;;QAGzC,MAAMP,eAAAA,GAAkBC,WAAW,UAAY,EAAA;AAAEC,YAAAA;AAAO,SAAA,CAAA;AACxD,QAAA,MAAMQ,eAAkB,GAAA,MAAMV,eAAgBM,CAAAA,MAAM,CAAC;AAAEH,YAAAA;AAAS,SAAA,CAAA;;AAGhEJ,QAAAA,GAAAA,CAAIK,IAAI,GAAG;YAAEC,IAAMK,EAAAA;AAAgB,SAAA;AACrC;AACF;;;;"}