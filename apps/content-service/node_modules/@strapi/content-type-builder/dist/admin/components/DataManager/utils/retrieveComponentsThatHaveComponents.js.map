{"version":3,"file":"retrieveComponentsThatHaveComponents.js","sources":["../../../../../admin/src/components/DataManager/utils/retrieveComponentsThatHaveComponents.ts"],"sourcesContent":["import get from 'lodash/get';\n\nimport type { AnyAttribute, Component, Components } from '../../../types';\nimport type { UID } from '@strapi/types';\n\ntype ChildComponent = {\n  component: UID.Component;\n};\n\nexport type ComponentWithChildren = {\n  component: UID.Component;\n  childComponents: ChildComponent[];\n};\n\nconst retrieveComponentsThatHaveComponents = (allComponents: Components) => {\n  const componentsThatHaveNestedComponents = Object.keys(allComponents).reduce(\n    (acc: ComponentWithChildren[], current) => {\n      const currentComponent = get(allComponents, [current]);\n\n      const compoWithChildren = getComponentWithChildComponents(currentComponent);\n      if (compoWithChildren.childComponents.length > 0) {\n        acc.push(compoWithChildren);\n      }\n\n      return acc;\n    },\n    []\n  );\n\n  return componentsThatHaveNestedComponents;\n};\n\nconst getComponentWithChildComponents = (component: Component): ComponentWithChildren => {\n  return {\n    component: component.uid,\n    childComponents: component.attributes\n      .filter(\n        (attribute: AnyAttribute): attribute is AnyAttribute & { component: UID.Component } => {\n          const { type } = attribute;\n\n          return type === 'component';\n        }\n      )\n      .map((attribute) => {\n        return {\n          component: attribute.component,\n        } as ChildComponent;\n      }),\n  };\n};\n\nexport { getComponentWithChildComponents, retrieveComponentsThatHaveComponents };\n"],"names":["retrieveComponentsThatHaveComponents","allComponents","componentsThatHaveNestedComponents","Object","keys","reduce","acc","current","currentComponent","get","compoWithChildren","getComponentWithChildComponents","childComponents","length","push","component","uid","attributes","filter","attribute","type","map"],"mappings":";;;;AAcA,MAAMA,uCAAuC,CAACC,aAAAA,GAAAA;IAC5C,MAAMC,kCAAAA,GAAqCC,OAAOC,IAAI,CAACH,eAAeI,MAAM,CAC1E,CAACC,GAA8BC,EAAAA,OAAAA,GAAAA;QAC7B,MAAMC,gBAAAA,GAAmBC,IAAIR,aAAe,EAAA;AAACM,YAAAA;AAAQ,SAAA,CAAA;AAErD,QAAA,MAAMG,oBAAoBC,+BAAgCH,CAAAA,gBAAAA,CAAAA;AAC1D,QAAA,IAAIE,iBAAkBE,CAAAA,eAAe,CAACC,MAAM,GAAG,CAAG,EAAA;AAChDP,YAAAA,GAAAA,CAAIQ,IAAI,CAACJ,iBAAAA,CAAAA;AACX;QAEA,OAAOJ,GAAAA;AACT,KAAA,EACA,EAAE,CAAA;IAGJ,OAAOJ,kCAAAA;AACT;AAEA,MAAMS,kCAAkC,CAACI,SAAAA,GAAAA;IACvC,OAAO;AACLA,QAAAA,SAAAA,EAAWA,UAAUC,GAAG;AACxBJ,QAAAA,eAAAA,EAAiBG,SAAUE,CAAAA,UAAU,CAClCC,MAAM,CACL,CAACC,SAAAA,GAAAA;YACC,MAAM,EAAEC,IAAI,EAAE,GAAGD,SAAAA;AAEjB,YAAA,OAAOC,IAAS,KAAA,WAAA;SAGnBC,CAAAA,CAAAA,GAAG,CAAC,CAACF,SAAAA,GAAAA;YACJ,OAAO;AACLJ,gBAAAA,SAAAA,EAAWI,UAAUJ;AACvB,aAAA;AACF,SAAA;AACJ,KAAA;AACF;;;;;"}