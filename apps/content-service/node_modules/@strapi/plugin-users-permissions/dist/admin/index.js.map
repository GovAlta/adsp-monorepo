{"version":3,"file":"index.js","sources":["../../admin/src/index.js"],"sourcesContent":["import { strapi as pkgStrapi } from '../../package.json';\n\nimport { PERMISSIONS } from './constants';\nimport getTrad from './utils/getTrad';\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\n\nconst name = pkgStrapi.name;\n\nexport default {\n  register(app) {\n    // Create the plugin's settings section\n    app.createSettingSection(\n      {\n        id: 'users-permissions',\n        intlLabel: {\n          id: getTrad('Settings.section-label'),\n          defaultMessage: 'Users & Permissions plugin',\n        },\n      },\n      [\n        {\n          intlLabel: {\n            id: 'global.roles',\n            defaultMessage: 'Roles',\n          },\n          id: 'roles',\n          to: `users-permissions/roles`,\n          Component: () => import('./pages/Roles'),\n          permissions: PERMISSIONS.accessRoles,\n        },\n        {\n          intlLabel: {\n            id: getTrad('HeaderNav.link.providers'),\n            defaultMessage: 'Providers',\n          },\n          id: 'providers',\n          to: `users-permissions/providers`,\n          Component: () => import('./pages/Providers'),\n          permissions: PERMISSIONS.readProviders,\n        },\n        {\n          intlLabel: {\n            id: getTrad('HeaderNav.link.emailTemplates'),\n            defaultMessage: 'Email templates',\n          },\n          id: 'email-templates',\n          to: `users-permissions/email-templates`,\n          Component: () =>\n            import('./pages/EmailTemplates').then((mod) => ({\n              default: mod.ProtectedEmailTemplatesPage,\n            })),\n          permissions: PERMISSIONS.readEmailTemplates,\n        },\n        {\n          intlLabel: {\n            id: getTrad('HeaderNav.link.advancedSettings'),\n            defaultMessage: 'Advanced Settings',\n          },\n          id: 'advanced-settings',\n          to: `users-permissions/advanced-settings`,\n          Component: () =>\n            import('./pages/AdvancedSettings').then((mod) => ({\n              default: mod.ProtectedAdvancedSettingsPage,\n            })),\n          permissions: PERMISSIONS.readAdvancedSettings,\n        },\n      ]\n    );\n\n    app.registerPlugin({\n      id: 'users-permissions',\n      name,\n    });\n  },\n  bootstrap() {},\n  async registerTrads({ locales }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, 'users-permissions'),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n"],"names":["name","pkgStrapi","register","app","createSettingSection","id","intlLabel","getTrad","defaultMessage","to","Component","permissions","PERMISSIONS","accessRoles","readProviders","then","mod","default","ProtectedEmailTemplatesPage","readEmailTemplates","ProtectedAdvancedSettingsPage","readAdvancedSettings","registerPlugin","bootstrap","registerTrads","locales","importedTrads","Promise","all","map","locale","data","prefixPluginTranslations","catch","resolve"],"mappings":"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"}