{"version":3,"file":"forms.mjs","sources":["../../../../../admin/src/pages/Providers/utils/forms.js"],"sourcesContent":["import { translatedErrors } from '@strapi/strapi/admin';\nimport * as yup from 'yup';\n\nimport { getTrad } from '../../../utils';\n\nconst callbackLabel = {\n  id: getTrad('PopUpForm.Providers.redirectURL.front-end.label'),\n  defaultMessage: 'The redirect URL to your front-end app',\n};\nconst callbackPlaceholder = {\n  id: 'http://www.client-app.com',\n  defaultMessage: 'http://www.client-app.com',\n};\nconst enabledDescription = {\n  id: getTrad('PopUpForm.Providers.enabled.description'),\n  defaultMessage: \"If disabled, users won't be able to use this provider.\",\n};\nconst enabledLabel = {\n  id: getTrad('PopUpForm.Providers.enabled.label'),\n  defaultMessage: 'Enable',\n};\nconst keyLabel = { id: getTrad('PopUpForm.Providers.key.label'), defaultMessage: 'Client ID' };\nconst hintLabel = {\n  id: getTrad('PopUpForm.Providers.redirectURL.label'),\n  defaultMessage: 'The redirect URL to add in your {provider} application configurations',\n};\nconst textPlaceholder = {\n  id: getTrad('PopUpForm.Providers.key.placeholder'),\n  defaultMessage: 'TEXT',\n};\n\nconst secretLabel = {\n  id: getTrad('PopUpForm.Providers.secret.label'),\n  defaultMessage: 'Client Secret',\n};\n\nconst CALLBACK_REGEX = /^$|^[a-z][a-z0-9+.-]*:\\/\\/[^\\s/$.?#](?:[^\\s]*[^\\s/$.?#])?$/i;\nconst SUBDOMAIN_REGEX = /^(([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+)(:\\d+)?(\\/\\S*)?$/i;\n\nconst forms = {\n  email: {\n    form: [\n      [\n        {\n          intlLabel: enabledLabel,\n          name: 'enabled',\n          type: 'bool',\n          description: enabledDescription,\n          size: 6,\n          // TODO check if still needed\n          // validations: {\n          //   required: true,\n          // },\n        },\n      ],\n    ],\n    schema: yup.object().shape({\n      enabled: yup.bool().required(translatedErrors.required.id),\n    }),\n  },\n  providers: {\n    form: [\n      [\n        {\n          intlLabel: enabledLabel,\n          name: 'enabled',\n          type: 'bool',\n          description: enabledDescription,\n          size: 6,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: keyLabel,\n          name: 'key',\n          type: 'text',\n          placeholder: textPlaceholder,\n          size: 12,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: secretLabel,\n          name: 'secret',\n          type: 'text',\n          placeholder: textPlaceholder,\n          size: 12,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: callbackLabel,\n          placeholder: callbackPlaceholder,\n          name: 'callback',\n          type: 'text',\n          size: 12,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: hintLabel,\n          name: 'noName',\n          type: 'text',\n          validations: {},\n          size: 12,\n          disabled: true,\n        },\n      ],\n    ],\n    schema: yup.object().shape({\n      enabled: yup.bool().required(translatedErrors.required.id),\n      key: yup.string().when('enabled', {\n        is: true,\n        then: yup.string().required(translatedErrors.required.id),\n        otherwise: yup.string(),\n      }),\n      secret: yup.string().when('enabled', {\n        is: true,\n        then: yup.string().required(translatedErrors.required.id),\n        otherwise: yup.string(),\n      }),\n      callback: yup.string().when('enabled', {\n        is: true,\n        then: yup\n          .string()\n          .matches(CALLBACK_REGEX, translatedErrors.regex.id)\n          .required(translatedErrors.required.id),\n        otherwise: yup.string(),\n      }),\n    }),\n  },\n  providersWithSubdomain: {\n    form: [\n      [\n        {\n          intlLabel: enabledLabel,\n          name: 'enabled',\n          type: 'bool',\n          description: enabledDescription,\n          size: 6,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: keyLabel,\n          name: 'key',\n          type: 'text',\n          placeholder: textPlaceholder,\n          size: 12,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: secretLabel,\n          name: 'secret',\n          type: 'text',\n          placeholder: textPlaceholder,\n          size: 12,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: {\n            id: getTrad({ id: 'PopUpForm.Providers.jwksurl.label' }),\n            defaultMessage: 'JWKS URL',\n          },\n          name: 'jwksurl',\n          type: 'text',\n          placeholder: textPlaceholder,\n          size: 12,\n          validations: {\n            required: false,\n          },\n        },\n      ],\n\n      [\n        {\n          intlLabel: {\n            id: getTrad('PopUpForm.Providers.subdomain.label'),\n            defaultMessage: 'Host URI (Subdomain)',\n          },\n          name: 'subdomain',\n          type: 'text',\n          placeholder: {\n            id: getTrad('PopUpForm.Providers.subdomain.placeholder'),\n            defaultMessage: 'my.subdomain.com',\n          },\n          size: 12,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: callbackLabel,\n          placeholder: callbackPlaceholder,\n          name: 'callback',\n          type: 'text',\n          size: 12,\n          validations: {\n            required: true,\n          },\n        },\n      ],\n      [\n        {\n          intlLabel: hintLabel,\n          name: 'noName',\n          type: 'text',\n          validations: {},\n          size: 12,\n          disabled: true,\n        },\n      ],\n    ],\n    schema: yup.object().shape({\n      enabled: yup.bool().required(translatedErrors.required.id),\n      key: yup.string().when('enabled', {\n        is: true,\n        then: yup.string().required(translatedErrors.required.id),\n        otherwise: yup.string(),\n      }),\n      secret: yup.string().when('enabled', {\n        is: true,\n        then: yup.string().required(translatedErrors.required.id),\n        otherwise: yup.string(),\n      }),\n      subdomain: yup.string().when('enabled', {\n        is: true,\n        then: yup\n          .string()\n          .matches(SUBDOMAIN_REGEX, translatedErrors.regex.id)\n          .required(translatedErrors.required.id),\n        otherwise: yup.string(),\n      }),\n      callback: yup.string().when('enabled', {\n        is: true,\n        then: yup\n          .string()\n          .matches(CALLBACK_REGEX, translatedErrors.regex.id)\n          .required(translatedErrors.required.id),\n        otherwise: yup.string(),\n      }),\n    }),\n  },\n};\n\nexport default forms;\n"],"names":["callbackLabel","id","getTrad","defaultMessage","callbackPlaceholder","enabledDescription","enabledLabel","keyLabel","hintLabel","textPlaceholder","secretLabel","CALLBACK_REGEX","SUBDOMAIN_REGEX","forms","email","form","intlLabel","name","type","description","size","schema","yup","object","shape","enabled","bool","required","translatedErrors","providers","validations","placeholder","disabled","key","string","when","is","then","otherwise","secret","callback","matches","regex","providersWithSubdomain","subdomain"],"mappings":"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"}