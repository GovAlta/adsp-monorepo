import{r as U,a as _,j as n,l6 as Re,bb as Ie,l7 as At,p as I,ae as M,l8 as qe,gM as We,by as kt,bz as Lt,e as $e,s as H,bC as Ot,b as xe,l9 as Nt,bF as _e,gJ as It,la as _t,bT as yt,cm as Pt,y as De,fy as Dt,bk as Vt,cQ as Ue,lb as Ft,lc as Gt,ld as Bt,P as ce,D as ue,v as zt,bl as Xe,le as Yt,b4 as Ht,b8 as qt,b9 as Wt,bh as Ut,eM as Qe,b2 as Ze,bg as Xt,u as Qt,fl as Zt,gT as J,c as Jt,fw as Ee,fz as Kt,lf as es}from"./strapi-CZE0NOhr.js";import{p as he,s as k,c as F,l as Ve,r as ye,d as St,a as jt,b as wt,i as ts,v as ss}from"./lt-DztdPs9C.js";function rs(t,e){const[s,r]=U.useState(t);return U.useEffect(()=>{const a=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(a)}},[t,e]),s}const as=({handleSelectClear:t,handleSelectChange:e,npmPackageType:s,possibleCategories:r,possibleCollections:a,query:i})=>{const{formatMessage:l}=_(),h=(u,j)=>{const o={[j]:(i[j]??[]).filter(d=>d!==u)};e(o)};return n.jsxs(Re.Root,{children:[n.jsx(Re.Trigger,{children:n.jsx(Ie,{variant:"tertiary",startIcon:n.jsx(At,{}),children:l({id:"app.utils.filters",defaultMessage:"Filters"})})}),n.jsx(Re.Content,{sideOffset:4,children:n.jsxs(I,{padding:3,direction:"column",alignItems:"stretch",gap:1,children:[n.jsx(Je,{message:l({id:"admin.pages.MarketPlacePage.filters.collections",defaultMessage:"Collections"}),value:i?.collections||[],onChange:u=>{e({collections:u})},onClear:()=>t("collections"),possibleFilters:a,customizeContent:u=>l({id:"admin.pages.MarketPlacePage.filters.collectionsSelected",defaultMessage:"{count, plural, =0 {No collections} one {# collection} other {# collections}} selected"},{count:u?.length??0})}),s==="plugin"&&n.jsx(Je,{message:l({id:"admin.pages.MarketPlacePage.filters.categories",defaultMessage:"Categories"}),value:i?.categories||[],onChange:u=>{e({categories:u})},onClear:()=>t("categories"),possibleFilters:r,customizeContent:u=>l({id:"admin.pages.MarketPlacePage.filters.categoriesSelected",defaultMessage:"{count, plural, =0 {No categories} one {# category} other {# categories}} selected"},{count:u?.length??0})})]})}),i.collections?.map(u=>n.jsx(M,{padding:1,children:n.jsx(qe,{icon:n.jsx(We,{}),onClick:()=>h(u,"collections"),children:u})},u)),s==="plugin"&&i.categories?.map(u=>n.jsx(M,{padding:1,children:n.jsx(qe,{icon:n.jsx(We,{}),onClick:()=>h(u,"categories"),children:u})},u))]})},Je=({message:t,value:e,onChange:s,possibleFilters:r,onClear:a,customizeContent:i})=>n.jsx(kt,{"data-testid":`${t}-button`,"aria-label":t,placeholder:t,onChange:s,onClear:a,value:e,customizeContent:i,children:Object.entries(r).map(([l,h])=>n.jsx(Lt,{"data-testid":`${l}-${h}`,value:l,children:`${l} (${h})`},l))}),ns=he,is=(t,e)=>{const s=ns(t.trim().replace(/^[=v]+/,""),e);return s?s.version:null};var ls=is;const Ke=k,os=(t,e,s,r,a)=>{typeof s=="string"&&(a=r,r=s,s=void 0);try{return new Ke(t instanceof Ke?t.version:t,s).inc(e,r,a).version}catch{return null}};var cs=os;const et=he,us=(t,e)=>{const s=et(t,null,!0),r=et(e,null,!0),a=s.compare(r);if(a===0)return null;const i=a>0,l=i?s:r,h=i?r:s,u=!!l.prerelease.length;if(!!h.prerelease.length&&!u)return!h.patch&&!h.minor?"major":l.patch?"patch":l.minor?"minor":"major";const o=u?"pre":"";return s.major!==r.major?o+"major":s.minor!==r.minor?o+"minor":s.patch!==r.patch?o+"patch":"prerelease"};var hs=us;const ds=k,fs=(t,e)=>new ds(t,e).major;var ps=fs;const gs=k,ms=(t,e)=>new gs(t,e).minor;var vs=ms;const $s=k,xs=(t,e)=>new $s(t,e).patch;var ys=xs;const Ps=he,Ss=(t,e)=>{const s=Ps(t,e);return s&&s.prerelease.length?s.prerelease:null};var js=Ss;const ws=F,bs=(t,e,s)=>ws(e,t,s);var Rs=bs;const Es=F,Cs=(t,e)=>Es(t,e,!0);var Ts=Cs;const tt=k,Ms=(t,e,s)=>{const r=new tt(t,s),a=new tt(e,s);return r.compare(a)||r.compareBuild(a)};var Fe=Ms;const As=Fe,ks=(t,e)=>t.sort((s,r)=>As(s,r,e));var Ls=ks;const Os=Fe,Ns=(t,e)=>t.sort((s,r)=>Os(r,s,e));var Is=Ns;const _s=F,Ds=(t,e,s)=>_s(t,e,s)>0;var Pe=Ds;const Vs=F,Fs=(t,e,s)=>Vs(t,e,s)===0;var bt=Fs;const Gs=F,Bs=(t,e,s)=>Gs(t,e,s)!==0;var Rt=Bs;const zs=F,Ys=(t,e,s)=>zs(t,e,s)>=0;var Ge=Ys;const Hs=F,qs=(t,e,s)=>Hs(t,e,s)<=0;var Be=qs;const Ws=bt,Us=Rt,Xs=Pe,Qs=Ge,Zs=Ve,Js=Be,Ks=(t,e,s,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof s=="object"&&(s=s.version),t===s;case"!==":return typeof t=="object"&&(t=t.version),typeof s=="object"&&(s=s.version),t!==s;case"":case"=":case"==":return Ws(t,s,r);case"!=":return Us(t,s,r);case">":return Xs(t,s,r);case">=":return Qs(t,s,r);case"<":return Zs(t,s,r);case"<=":return Js(t,s,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var Et=Ks;const er=k,tr=he,{safeRe:fe,t:pe}=ye,sr=(t,e)=>{if(t instanceof er)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let s=null;if(!e.rtl)s=t.match(fe[pe.COERCE]);else{let r;for(;(r=fe[pe.COERCERTL].exec(t))&&(!s||s.index+s[0].length!==t.length);)(!s||r.index+r[0].length!==s.index+s[0].length)&&(s=r),fe[pe.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;fe[pe.COERCERTL].lastIndex=-1}return s===null?null:tr(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,e)};var rr=sr,Ce,st;function ar(){return st||(st=1,Ce=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Ce}var nr=S;S.Node=X;S.create=S;function S(t){var e=this;if(e instanceof S||(e=new S),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(a){e.push(a)});else if(arguments.length>0)for(var s=0,r=arguments.length;s<r;s++)e.push(arguments[s]);return e}S.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,s=t.prev;return e&&(e.prev=s),s&&(s.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,e};S.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};S.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};S.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)lr(this,arguments[t]);return this.length};S.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)or(this,arguments[t]);return this.length};S.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};S.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};S.prototype.forEach=function(t,e){e=e||this;for(var s=this.head,r=0;s!==null;r++)t.call(e,s.value,r,this),s=s.next};S.prototype.forEachReverse=function(t,e){e=e||this;for(var s=this.tail,r=this.length-1;s!==null;r--)t.call(e,s.value,r,this),s=s.prev};S.prototype.get=function(t){for(var e=0,s=this.head;s!==null&&e<t;e++)s=s.next;if(e===t&&s!==null)return s.value};S.prototype.getReverse=function(t){for(var e=0,s=this.tail;s!==null&&e<t;e++)s=s.prev;if(e===t&&s!==null)return s.value};S.prototype.map=function(t,e){e=e||this;for(var s=new S,r=this.head;r!==null;)s.push(t.call(e,r.value,this)),r=r.next;return s};S.prototype.mapReverse=function(t,e){e=e||this;for(var s=new S,r=this.tail;r!==null;)s.push(t.call(e,r.value,this)),r=r.prev;return s};S.prototype.reduce=function(t,e){var s,r=this.head;if(arguments.length>1)s=e;else if(this.head)r=this.head.next,s=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;r!==null;a++)s=t(s,r.value,a),r=r.next;return s};S.prototype.reduceReverse=function(t,e){var s,r=this.tail;if(arguments.length>1)s=e;else if(this.tail)r=this.tail.prev,s=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;r!==null;a--)s=t(s,r.value,a),r=r.prev;return s};S.prototype.toArray=function(){for(var t=new Array(this.length),e=0,s=this.head;s!==null;e++)t[e]=s.value,s=s.next;return t};S.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,s=this.tail;s!==null;e++)t[e]=s.value,s=s.prev;return t};S.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var s=new S;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,a=this.head;a!==null&&r<t;r++)a=a.next;for(;a!==null&&r<e;r++,a=a.next)s.push(a.value);return s};S.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var s=new S;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,a=this.tail;a!==null&&r>e;r--)a=a.prev;for(;a!==null&&r>t;r--,a=a.prev)s.push(a.value);return s};S.prototype.splice=function(t,e,...s){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,a=this.head;a!==null&&r<t;r++)a=a.next;for(var i=[],r=0;a&&r<e;r++)i.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var r=0;r<s.length;r++)a=ir(this,a,s[r]);return i};S.prototype.reverse=function(){for(var t=this.head,e=this.tail,s=t;s!==null;s=s.prev){var r=s.prev;s.prev=s.next,s.next=r}return this.head=e,this.tail=t,this};function ir(t,e,s){var r=e===t.head?new X(s,null,e,t):new X(s,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function lr(t,e){t.tail=new X(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function or(t,e){t.head=new X(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function X(t,e,s,r){if(!(this instanceof X))return new X(t,e,s,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}try{ar()(S)}catch{}const cr=nr,q=Symbol("max"),B=Symbol("length"),K=Symbol("lengthCalculator"),oe=Symbol("allowStale"),W=Symbol("maxAge"),G=Symbol("dispose"),rt=Symbol("noDisposeOnSet"),C=Symbol("lruList"),N=Symbol("cache"),Ct=Symbol("updateAgeOnGet"),Te=()=>1;class ur{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[q]=e.max||1/0;const s=e.length||Te;if(this[K]=typeof s!="function"?Te:s,this[oe]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[W]=e.maxAge||0,this[G]=e.dispose,this[rt]=e.noDisposeOnSet||!1,this[Ct]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[q]=e||1/0,ie(this)}get max(){return this[q]}set allowStale(e){this[oe]=!!e}get allowStale(){return this[oe]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[W]=e,ie(this)}get maxAge(){return this[W]}set lengthCalculator(e){typeof e!="function"&&(e=Te),e!==this[K]&&(this[K]=e,this[B]=0,this[C].forEach(s=>{s.length=this[K](s.value,s.key),this[B]+=s.length})),ie(this)}get lengthCalculator(){return this[K]}get length(){return this[B]}get itemCount(){return this[C].length}rforEach(e,s){s=s||this;for(let r=this[C].tail;r!==null;){const a=r.prev;at(this,e,r,s),r=a}}forEach(e,s){s=s||this;for(let r=this[C].head;r!==null;){const a=r.next;at(this,e,r,s),r=a}}keys(){return this[C].toArray().map(e=>e.key)}values(){return this[C].toArray().map(e=>e.value)}reset(){this[G]&&this[C]&&this[C].length&&this[C].forEach(e=>this[G](e.key,e.value)),this[N]=new Map,this[C]=new cr,this[B]=0}dump(){return this[C].map(e=>me(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[C]}set(e,s,r){if(r=r||this[W],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const a=r?Date.now():0,i=this[K](s,e);if(this[N].has(e)){if(i>this[q])return te(this,this[N].get(e)),!1;const u=this[N].get(e).value;return this[G]&&(this[rt]||this[G](e,u.value)),u.now=a,u.maxAge=r,u.value=s,this[B]+=i-u.length,u.length=i,this.get(e),ie(this),!0}const l=new hr(e,s,i,a,r);return l.length>this[q]?(this[G]&&this[G](e,s),!1):(this[B]+=l.length,this[C].unshift(l),this[N].set(e,this[C].head),ie(this),!0)}has(e){if(!this[N].has(e))return!1;const s=this[N].get(e).value;return!me(this,s)}get(e){return Me(this,e,!0)}peek(e){return Me(this,e,!1)}pop(){const e=this[C].tail;return e?(te(this,e),e.value):null}del(e){te(this,this[N].get(e))}load(e){this.reset();const s=Date.now();for(let r=e.length-1;r>=0;r--){const a=e[r],i=a.e||0;if(i===0)this.set(a.k,a.v);else{const l=i-s;l>0&&this.set(a.k,a.v,l)}}}prune(){this[N].forEach((e,s)=>Me(this,s,!1))}}const Me=(t,e,s)=>{const r=t[N].get(e);if(r){const a=r.value;if(me(t,a)){if(te(t,r),!t[oe])return}else s&&(t[Ct]&&(r.value.now=Date.now()),t[C].unshiftNode(r));return a.value}},me=(t,e)=>{if(!e||!e.maxAge&&!t[W])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[W]&&s>t[W]},ie=t=>{if(t[B]>t[q])for(let e=t[C].tail;t[B]>t[q]&&e!==null;){const s=e.prev;te(t,e),e=s}},te=(t,e)=>{if(e){const s=e.value;t[G]&&t[G](s.key,s.value),t[B]-=s.length,t[N].delete(s.key),t[C].removeNode(e)}};class hr{constructor(e,s,r,a,i){this.key=e,this.value=s,this.length=r,this.now=a,this.maxAge=i||0}}const at=(t,e,s,r)=>{let a=s.value;me(t,a)&&(te(t,s),t[oe]||(a=void 0)),a&&e.call(r,a.value,a.key,t)};var dr=ur,Ae,nt;function D(){if(nt)return Ae;nt=1;class t{constructor(c,$){if($=r($),c instanceof t)return c.loose===!!$.loose&&c.includePrerelease===!!$.includePrerelease?c:new t(c.raw,$);if(c instanceof a)return this.raw=c.value,this.set=[[c]],this.format(),this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=c.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(m=>this.parseRange(m.trim())).filter(m=>m.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const m=this.set[0];if(this.set=this.set.filter(v=>!O(v[0])),this.set.length===0)this.set=[m];else if(this.set.length>1){for(const v of this.set)if(v.length===1&&z(v[0])){this.set=[v];break}}}this.format()}format(){return this.range=this.set.map(c=>c.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(c){const m=((this.options.includePrerelease&&y)|(this.options.loose&&p))+":"+c,v=s.get(m);if(v)return v;const g=this.options.loose,x=g?h[u.HYPHENRANGELOOSE]:h[u.HYPHENRANGE];c=c.replace(x,L(this.options.includePrerelease)),i("hyphen replace",c),c=c.replace(h[u.COMPARATORTRIM],j),i("comparator trim",c),c=c.replace(h[u.TILDETRIM],o),i("tilde trim",c),c=c.replace(h[u.CARETTRIM],d),i("caret trim",c);let w=c.split(" ").map(R=>Z(R,this.options)).join(" ").split(/\s+/).map(R=>T(R,this.options));g&&(w=w.filter(R=>(i("loose invalid filter",R,this.options),!!R.match(h[u.COMPARATORLOOSE])))),i("range list",w);const P=new Map,b=w.map(R=>new a(R,this.options));for(const R of b){if(O(R))return[R];P.set(R.value,R)}P.size>1&&P.has("")&&P.delete("");const A=[...P.values()];return s.set(m,A),A}intersects(c,$){if(!(c instanceof t))throw new TypeError("a Range is required");return this.set.some(m=>Q(m,$)&&c.set.some(v=>Q(v,$)&&m.every(g=>v.every(x=>g.intersects(x,$)))))}test(c){if(!c)return!1;if(typeof c=="string")try{c=new l(c,this.options)}catch{return!1}for(let $=0;$<this.set.length;$++)if(be(this.set[$],c,this.options))return!0;return!1}}Ae=t;const e=dr,s=new e({max:1e3}),r=wt,a=Se(),i=St,l=k,{safeRe:h,t:u,comparatorTrimReplace:j,tildeTrimReplace:o,caretTrimReplace:d}=ye,{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:p}=jt,O=f=>f.value==="<0.0.0-0",z=f=>f.value==="",Q=(f,c)=>{let $=!0;const m=f.slice();let v=m.pop();for(;$&&m.length;)$=m.every(g=>v.intersects(g,c)),v=m.pop();return $},Z=(f,c)=>(i("comp",f,c),f=Y(f,c),i("caret",f),f=se(f,c),i("tildes",f),f=ae(f,c),i("xrange",f),f=de(f,c),i("stars",f),f),E=f=>!f||f.toLowerCase()==="x"||f==="*",se=(f,c)=>f.trim().split(/\s+/).map($=>re($,c)).join(" "),re=(f,c)=>{const $=c.loose?h[u.TILDELOOSE]:h[u.TILDE];return f.replace($,(m,v,g,x,w)=>{i("tilde",f,m,v,g,x,w);let P;return E(v)?P="":E(g)?P=`>=${v}.0.0 <${+v+1}.0.0-0`:E(x)?P=`>=${v}.${g}.0 <${v}.${+g+1}.0-0`:w?(i("replaceTilde pr",w),P=`>=${v}.${g}.${x}-${w} <${v}.${+g+1}.0-0`):P=`>=${v}.${g}.${x} <${v}.${+g+1}.0-0`,i("tilde return",P),P})},Y=(f,c)=>f.trim().split(/\s+/).map($=>V($,c)).join(" "),V=(f,c)=>{i("caret",f,c);const $=c.loose?h[u.CARETLOOSE]:h[u.CARET],m=c.includePrerelease?"-0":"";return f.replace($,(v,g,x,w,P)=>{i("caret",f,v,g,x,w,P);let b;return E(g)?b="":E(x)?b=`>=${g}.0.0${m} <${+g+1}.0.0-0`:E(w)?g==="0"?b=`>=${g}.${x}.0${m} <${g}.${+x+1}.0-0`:b=`>=${g}.${x}.0${m} <${+g+1}.0.0-0`:P?(i("replaceCaret pr",P),g==="0"?x==="0"?b=`>=${g}.${x}.${w}-${P} <${g}.${x}.${+w+1}-0`:b=`>=${g}.${x}.${w}-${P} <${g}.${+x+1}.0-0`:b=`>=${g}.${x}.${w}-${P} <${+g+1}.0.0-0`):(i("no pr"),g==="0"?x==="0"?b=`>=${g}.${x}.${w}${m} <${g}.${x}.${+w+1}-0`:b=`>=${g}.${x}.${w}${m} <${g}.${+x+1}.0-0`:b=`>=${g}.${x}.${w} <${+g+1}.0.0-0`),i("caret return",b),b})},ae=(f,c)=>(i("replaceXRanges",f,c),f.split(/\s+/).map($=>we($,c)).join(" ")),we=(f,c)=>{f=f.trim();const $=c.loose?h[u.XRANGELOOSE]:h[u.XRANGE];return f.replace($,(m,v,g,x,w,P)=>{i("xRange",f,m,v,g,x,w,P);const b=E(g),A=b||E(x),R=A||E(w),ne=R;return v==="="&&ne&&(v=""),P=c.includePrerelease?"-0":"",b?v===">"||v==="<"?m="<0.0.0-0":m="*":v&&ne?(A&&(x=0),w=0,v===">"?(v=">=",A?(g=+g+1,x=0,w=0):(x=+x+1,w=0)):v==="<="&&(v="<",A?g=+g+1:x=+x+1),v==="<"&&(P="-0"),m=`${v+g}.${x}.${w}${P}`):A?m=`>=${g}.0.0${P} <${+g+1}.0.0-0`:R&&(m=`>=${g}.${x}.0${P} <${g}.${+x+1}.0-0`),i("xRange return",m),m})},de=(f,c)=>(i("replaceStars",f,c),f.trim().replace(h[u.STAR],"")),T=(f,c)=>(i("replaceGTE0",f,c),f.trim().replace(h[c.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=f=>(c,$,m,v,g,x,w,P,b,A,R,ne,Za)=>(E(m)?$="":E(v)?$=`>=${m}.0.0${f?"-0":""}`:E(g)?$=`>=${m}.${v}.0${f?"-0":""}`:x?$=`>=${$}`:$=`>=${$}${f?"-0":""}`,E(b)?P="":E(A)?P=`<${+b+1}.0.0-0`:E(R)?P=`<${b}.${+A+1}.0-0`:ne?P=`<=${b}.${A}.${R}-${ne}`:f?P=`<${b}.${A}.${+R+1}-0`:P=`<=${P}`,`${$} ${P}`.trim()),be=(f,c,$)=>{for(let m=0;m<f.length;m++)if(!f[m].test(c))return!1;if(c.prerelease.length&&!$.includePrerelease){for(let m=0;m<f.length;m++)if(i(f[m].semver),f[m].semver!==a.ANY&&f[m].semver.prerelease.length>0){const v=f[m].semver;if(v.major===c.major&&v.minor===c.minor&&v.patch===c.patch)return!0}return!1}return!0};return Ae}var ke,it;function Se(){if(it)return ke;it=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(o,d){if(d=s(d),o instanceof e){if(o.loose===!!d.loose)return o;o=o.value}o=o.trim().split(/\s+/).join(" "),l("comparator",o,d),this.options=d,this.loose=!!d.loose,this.parse(o),this.semver===t?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(o){const d=this.options.loose?r[a.COMPARATORLOOSE]:r[a.COMPARATOR],y=o.match(d);if(!y)throw new TypeError(`Invalid comparator: ${o}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new h(y[2],this.options.loose):this.semver=t}toString(){return this.value}test(o){if(l("Comparator.test",o,this.options.loose),this.semver===t||o===t)return!0;if(typeof o=="string")try{o=new h(o,this.options)}catch{return!1}return i(o,this.operator,this.semver,this.options)}intersects(o,d){if(!(o instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(o.value,d).test(this.value):o.operator===""?o.value===""?!0:new u(this.value,d).test(o.semver):(d=s(d),d.includePrerelease&&(this.value==="<0.0.0-0"||o.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&o.operator.startsWith(">")||this.operator.startsWith("<")&&o.operator.startsWith("<")||this.semver.version===o.semver.version&&this.operator.includes("=")&&o.operator.includes("=")||i(this.semver,"<",o.semver,d)&&this.operator.startsWith(">")&&o.operator.startsWith("<")||i(this.semver,">",o.semver,d)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}ke=e;const s=wt,{safeRe:r,t:a}=ye,i=Et,l=St,h=k,u=D();return ke}const fr=D(),pr=(t,e,s)=>{try{e=new fr(e,s)}catch{return!1}return e.test(t)};var je=pr;const gr=D(),mr=(t,e)=>new gr(t,e).set.map(s=>s.map(r=>r.value).join(" ").trim().split(" "));var vr=mr;const $r=k,xr=D(),yr=(t,e,s)=>{let r=null,a=null,i=null;try{i=new xr(e,s)}catch{return null}return t.forEach(l=>{i.test(l)&&(!r||a.compare(l)===-1)&&(r=l,a=new $r(r,s))}),r};var Pr=yr;const Sr=k,jr=D(),wr=(t,e,s)=>{let r=null,a=null,i=null;try{i=new jr(e,s)}catch{return null}return t.forEach(l=>{i.test(l)&&(!r||a.compare(l)===1)&&(r=l,a=new Sr(r,s))}),r};var br=wr;const Le=k,Rr=D(),lt=Pe,Er=(t,e)=>{t=new Rr(t,e);let s=new Le("0.0.0");if(t.test(s)||(s=new Le("0.0.0-0"),t.test(s)))return s;s=null;for(let r=0;r<t.set.length;++r){const a=t.set[r];let i=null;a.forEach(l=>{const h=new Le(l.semver.version);switch(l.operator){case">":h.prerelease.length===0?h.patch++:h.prerelease.push(0),h.raw=h.format();case"":case">=":(!i||lt(h,i))&&(i=h);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),i&&(!s||lt(s,i))&&(s=i)}return s&&t.test(s)?s:null};var Cr=Er;const Tr=D(),Mr=(t,e)=>{try{return new Tr(t,e).range||"*"}catch{return null}};var Ar=Mr;const kr=k,Tt=Se(),{ANY:Lr}=Tt,Or=D(),Nr=je,ot=Pe,ct=Ve,Ir=Be,_r=Ge,Dr=(t,e,s,r)=>{t=new kr(t,r),e=new Or(e,r);let a,i,l,h,u;switch(s){case">":a=ot,i=Ir,l=ct,h=">",u=">=";break;case"<":a=ct,i=_r,l=ot,h="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Nr(t,e,r))return!1;for(let j=0;j<e.set.length;++j){const o=e.set[j];let d=null,y=null;if(o.forEach(p=>{p.semver===Lr&&(p=new Tt(">=0.0.0")),d=d||p,y=y||p,a(p.semver,d.semver,r)?d=p:l(p.semver,y.semver,r)&&(y=p)}),d.operator===h||d.operator===u||(!y.operator||y.operator===h)&&i(t,y.semver))return!1;if(y.operator===u&&l(t,y.semver))return!1}return!0};var ze=Dr;const Vr=ze,Fr=(t,e,s)=>Vr(t,e,">",s);var Gr=Fr;const Br=ze,zr=(t,e,s)=>Br(t,e,"<",s);var Yr=zr;const ut=D(),Hr=(t,e,s)=>(t=new ut(t,s),e=new ut(e,s),t.intersects(e,s));var qr=Hr;const Wr=je,Ur=F;var Xr=(t,e,s)=>{const r=[];let a=null,i=null;const l=t.sort((o,d)=>Ur(o,d,s));for(const o of l)Wr(o,e,s)?(i=o,a||(a=o)):(i&&r.push([a,i]),i=null,a=null);a&&r.push([a,null]);const h=[];for(const[o,d]of r)o===d?h.push(o):!d&&o===l[0]?h.push("*"):d?o===l[0]?h.push(`<=${d}`):h.push(`${o} - ${d}`):h.push(`>=${o}`);const u=h.join(" || "),j=typeof e.raw=="string"?e.raw:String(e);return u.length<j.length?u:e};const ht=D(),Ye=Se(),{ANY:Oe}=Ye,le=je,He=F,Qr=(t,e,s={})=>{if(t===e)return!0;t=new ht(t,s),e=new ht(e,s);let r=!1;e:for(const a of t.set){for(const i of e.set){const l=Jr(a,i,s);if(r=r||l!==null,l)continue e}if(r)return!1}return!0},Zr=[new Ye(">=0.0.0-0")],dt=[new Ye(">=0.0.0")],Jr=(t,e,s)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Oe){if(e.length===1&&e[0].semver===Oe)return!0;s.includePrerelease?t=Zr:t=dt}if(e.length===1&&e[0].semver===Oe){if(s.includePrerelease)return!0;e=dt}const r=new Set;let a,i;for(const p of t)p.operator===">"||p.operator===">="?a=ft(a,p,s):p.operator==="<"||p.operator==="<="?i=pt(i,p,s):r.add(p.semver);if(r.size>1)return null;let l;if(a&&i){if(l=He(a.semver,i.semver,s),l>0)return null;if(l===0&&(a.operator!==">="||i.operator!=="<="))return null}for(const p of r){if(a&&!le(p,String(a),s)||i&&!le(p,String(i),s))return null;for(const O of e)if(!le(p,String(O),s))return!1;return!0}let h,u,j,o,d=i&&!s.includePrerelease&&i.semver.prerelease.length?i.semver:!1,y=a&&!s.includePrerelease&&a.semver.prerelease.length?a.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const p of e){if(o=o||p.operator===">"||p.operator===">=",j=j||p.operator==="<"||p.operator==="<=",a){if(y&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===y.major&&p.semver.minor===y.minor&&p.semver.patch===y.patch&&(y=!1),p.operator===">"||p.operator===">="){if(h=ft(a,p,s),h===p&&h!==a)return!1}else if(a.operator===">="&&!le(a.semver,String(p),s))return!1}if(i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(u=pt(i,p,s),u===p&&u!==i)return!1}else if(i.operator==="<="&&!le(i.semver,String(p),s))return!1}if(!p.operator&&(i||a)&&l!==0)return!1}return!(a&&j&&!i&&l!==0||i&&o&&!a&&l!==0||y||d)},ft=(t,e,s)=>{if(!t)return e;const r=He(t.semver,e.semver,s);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},pt=(t,e,s)=>{if(!t)return e;const r=He(t.semver,e.semver,s);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var Kr=Qr;const Ne=ye,gt=jt,ea=k,mt=ts,ta=he,sa=ss,ra=ls,aa=cs,na=hs,ia=ps,la=vs,oa=ys,ca=js,ua=F,ha=Rs,da=Ts,fa=Fe,pa=Ls,ga=Is,ma=Pe,va=Ve,$a=bt,xa=Rt,ya=Ge,Pa=Be,Sa=Et,ja=rr,wa=Se(),ba=D(),Ra=je,Ea=vr,Ca=Pr,Ta=br,Ma=Cr,Aa=Ar,ka=ze,La=Gr,Oa=Yr,Na=qr,Ia=Xr,_a=Kr;var ve={parse:ta,valid:sa,clean:ra,inc:aa,diff:na,major:ia,minor:la,patch:oa,prerelease:ca,compare:ua,rcompare:ha,compareLoose:da,compareBuild:fa,sort:pa,rsort:ga,gt:ma,lt:va,eq:$a,neq:xa,gte:ya,lte:Pa,cmp:Sa,coerce:ja,Comparator:wa,Range:ba,satisfies:Ra,toComparators:Ea,maxSatisfying:Ca,minSatisfying:Ta,minVersion:Ma,validRange:Aa,outside:ka,gtr:La,ltr:Oa,intersects:Na,simplifyRange:Ia,subset:_a,SemVer:ea,re:Ne.re,src:Ne.src,tokens:Ne.t,SEMVER_SPEC_VERSION:gt.SEMVER_SPEC_VERSION,RELEASE_TYPES:gt.RELEASE_TYPES,compareIdentifiers:mt.compareIdentifiers,rcompareIdentifiers:mt.rcompareIdentifiers};const Da=$e(H)`
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
`,Va=({npmPackage:t,isInstalled:e,useYarn:s,isInDevelopmentMode:r,npmPackageType:a,strapiAppVersion:i})=>{const{attributes:l}=t,{formatMessage:h}=_(),{trackUsage:u}=xe(),j=s?`yarn add ${l.npmPackageName}`:`npm install ${l.npmPackageName}`,o=h({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),d=`https://market.strapi.io/${Nt.plural(a)}/${l.slug}`,y=ve.validRange(l.strapiVersion),p=y?ve.satisfies(i??"",y):!1;return n.jsxs(I,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card",children:[n.jsxs(M,{children:[n.jsxs(I,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[n.jsx(M,{tag:"img",src:l.logo.url,alt:`${l.name} logo`,hasRadius:!0,width:11,height:11}),n.jsx(Ba,{githubStars:l.githubStars,npmDownloads:l.npmDownloads,npmPackageType:a})]}),n.jsx(M,{paddingTop:4,children:n.jsx(H,{tag:"h3",variant:"delta",children:n.jsxs(I,{alignItems:"center",gap:l.validated&&!l.madeByStrapi?2:1,children:[l.name,l.validated&&!l.madeByStrapi&&n.jsx(_e,{description:h({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"}),children:n.jsx(It,{fill:"success600"})}),l.madeByStrapi&&n.jsx(_e,{description:o,children:n.jsx(M,{tag:"img",src:_t,alt:o,width:6,height:"auto"})})]})})}),n.jsx(M,{paddingTop:2,children:n.jsx(Da,{tag:"p",variant:"omega",textColor:"neutral600",children:l.description})})]}),n.jsxs(I,{gap:2,style:{alignSelf:"flex-end"},paddingTop:6,children:[n.jsx(yt,{size:"S",href:d,isExternal:!0,endIcon:n.jsx(Pt,{}),"aria-label":h({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:l.name}),variant:"tertiary",onClick:()=>u("didPluginLearnMore"),children:h({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"More"})}),n.jsx(Fa,{isInstalled:e,isInDevelopmentMode:r,isCompatible:p,commandToCopy:j,strapiAppVersion:i,strapiPeerDepVersion:l.strapiVersion,pluginName:l.name})]})]})},Fa=({isInstalled:t,isInDevelopmentMode:e,isCompatible:s,commandToCopy:r,strapiAppVersion:a,strapiPeerDepVersion:i,pluginName:l})=>{const{toggleNotification:h}=De(),{formatMessage:u}=_(),{trackUsage:j}=xe(),{copy:o}=Dt(),d=async()=>{await o(r)&&(j("willInstallPlugin"),h({type:"success",message:u({id:"admin.pages.MarketPlacePage.plugin.copy.success"})}))};return t?n.jsxs(I,{gap:2,paddingLeft:4,children:[n.jsx(Vt,{width:"1.2rem",height:"1.2rem",color:"success600"}),n.jsx(H,{variant:"omega",textColor:"success600",fontWeight:"bold",children:u({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"})})]}):e&&s!==!1?n.jsx(Ga,{strapiAppVersion:a,strapiPeerDepVersion:i,handleCopy:d,pluginName:l}):null},Ga=({strapiPeerDepVersion:t,strapiAppVersion:e,handleCopy:s,pluginName:r})=>{const{formatMessage:a}=_(),i=ve.validRange(t),l=ve.satisfies(e??"",i??""),h=a({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"});return e&&(!i||!l)?n.jsx(_e,{"data-testid":`tooltip-${r}`,label:a({id:"admin.pages.MarketPlacePage.plugin.version",defaultMessage:'Update your Strapi version: "{strapiAppVersion}" to: "{versionRange}"'},{strapiAppVersion:e,versionRange:i}),children:n.jsx("span",{children:n.jsx(Ie,{size:"S",startIcon:n.jsx(Ue,{}),variant:"secondary",onClick:s,disabled:!l,children:h})})}):n.jsx(Ie,{size:"S",startIcon:n.jsx(Ue,{}),variant:"secondary",onClick:s,children:h})},Ba=({githubStars:t=0,npmDownloads:e=0,npmPackageType:s})=>{const{formatMessage:r}=_();return n.jsxs(I,{gap:1,children:[!!t&&n.jsxs(n.Fragment,{children:[n.jsx(Ft,{height:"1.2rem",width:"1.2rem","aria-hidden":!0}),n.jsx(Gt,{height:"1.2rem",width:"1.2rem",fill:"warning500","aria-hidden":!0}),n.jsx("p",{"aria-label":r({id:`admin.pages.MarketPlacePage.${s}.githubStars`,defaultMessage:"This {package} was starred {starsCount} on GitHub"},{starsCount:t,package:s}),children:n.jsx(H,{variant:"pi",textColor:"neutral800",children:t})}),n.jsx(za,{})]}),n.jsx(Bt,{height:"1.2rem",width:"1.2rem","aria-hidden":!0}),n.jsx("p",{"aria-label":r({id:`admin.pages.MarketPlacePage.${s}.downloads`,defaultMessage:"This {package} has {downloadsCount} weekly downloads"},{downloadsCount:e,package:s}),children:n.jsx(H,{variant:"pi",textColor:"neutral800",children:e})})]})},za=$e(Ot)`
  width: 1.2rem;
  transform: rotate(90deg);
`,vt=({status:t,npmPackages:e=[],installedPackageNames:s=[],useYarn:r,isInDevelopmentMode:a,npmPackageType:i,strapiAppVersion:l,debouncedSearch:h})=>{const{formatMessage:u}=_();if(t==="error")return n.jsx(ce.Error,{});if(t==="loading")return n.jsx(ce.Loading,{});const j=u({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:h});return e.length===0?n.jsxs(M,{position:"relative",children:[n.jsx(ue.Grid,{size:"M",children:Array(12).fill(null).map((o,d)=>n.jsx(Ya,{height:"234px",hasRadius:!0},d))}),n.jsx(M,{position:"absolute",top:11,width:"100%",children:n.jsxs(I,{alignItems:"center",justifyContent:"center",direction:"column",children:[n.jsx(zt,{width:"160px",height:"88px"}),n.jsx(M,{paddingTop:6,children:n.jsx(H,{variant:"delta",tag:"p",textColor:"neutral600",children:j})})]})})]}):n.jsx(Xe.Root,{gap:4,children:e.map(o=>n.jsx(Xe.Item,{col:4,s:6,xs:12,style:{height:"100%"},direction:"column",alignItems:"stretch",children:n.jsx(Va,{npmPackage:o,isInstalled:s.includes(o.attributes.npmPackageName),useYarn:r,isInDevelopmentMode:a,npmPackageType:i,strapiAppVersion:l})},o.id))})},Ya=$e(M)`
  background: ${({theme:t})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${t.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Mt=({isOnline:t,npmPackageType:e="plugin"})=>{const{formatMessage:s}=_(),{trackUsage:r}=xe(),a=e==="provider"?"didSubmitProvider":"didSubmitPlugin";return n.jsx(ue.Header,{title:s({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:s({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:t&&n.jsx(yt,{startIcon:n.jsx(Yt,{}),variant:"tertiary",href:`https://market.strapi.io/submit-${e}`,onClick:()=>r(a),isExternal:!0,children:s({id:`admin.pages.MarketPlacePage.submit.${e}.link`,defaultMessage:`Submit ${e}`})})})},Ha=()=>{const{formatMessage:t}=_();return n.jsx(ue.Root,{children:n.jsxs(Ht,{children:[n.jsx(Mt,{}),n.jsxs(I,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",paddingTop:"12rem",children:[n.jsx(M,{paddingBottom:2,children:n.jsx(H,{textColor:"neutral700",variant:"alpha",children:t({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"})})}),n.jsx(M,{paddingBottom:6,children:n.jsx(H,{textColor:"neutral700",variant:"epsilon",children:t({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."})})}),n.jsxs("svg",{width:"88",height:"88",viewBox:"0 0 88 88",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{x:".5",y:".5",width:"87",height:"87",rx:"43.5",fill:"#F0F0FF"}),n.jsx("path",{d:"M34 39.3h-4c-2.6 0-4.7 1-6.6 2.8a9 9 0 0 0-2.7 6.6 9 9 0 0 0 2.7 6.6A9 9 0 0 0 30 58h22.8L34 39.3Zm-11-11 3-3 39 39-3 3-4.7-4.6H30a13.8 13.8 0 0 1-14-14c0-3.8 1.3-7 4-9.7 2.6-2.7 5.7-4.2 9.5-4.3L23 28.2Zm38.2 11.1c3 .2 5.5 1.5 7.6 3.7A11 11 0 0 1 72 51c0 4-1.6 7.2-5 9.5l-3.3-3.4a6.5 6.5 0 0 0 3.6-6.1c0-1.9-.7-3.5-2-5-1.5-1.3-3.1-2-5-2h-3.5v-1.2c0-3.6-1.2-6.6-3.7-9a13 13 0 0 0-15-2.3L34.6 28a17 17 0 0 1 20.3 1.5c3.5 2.7 5.5 6 6.3 10Z",fill:"#4945FF"}),n.jsx("rect",{x:".5",y:".5",width:"87",height:"87",rx:"43.5",stroke:"#D9D8FF"})]})]})]})})},$t={"name:asc":{selected:{id:"admin.pages.MarketPlacePage.sort.alphabetical.selected",defaultMessage:"Sort by alphabetical order"},option:{id:"admin.pages.MarketPlacePage.sort.alphabetical",defaultMessage:"Alphabetical order"}},"submissionDate:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.newest.selected",defaultMessage:"Sort by newest"},option:{id:"admin.pages.MarketPlacePage.sort.newest",defaultMessage:"Newest"}},"githubStars:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.githubStars.selected",defaultMessage:"Sort by GitHub stars"},option:{id:"admin.pages.MarketPlacePage.sort.githubStars",defaultMessage:"Number of GitHub stars"}},"npmDownloads:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.npmDownloads.selected",defaultMessage:"Sort by npm downloads"},option:{id:"admin.pages.MarketPlacePage.sort.npmDownloads",defaultMessage:"Number of downloads"}}},qa=({sortQuery:t,handleSelectChange:e})=>{const{formatMessage:s}=_();return n.jsx(Wa,{children:n.jsx(qt,{value:t,customizeContent:()=>s($t[t].selected),onChange:r=>{e({sort:r})},"aria-label":s({id:"admin.pages.MarketPlacePage.sort.label",defaultMessage:"Sort by"}),size:"S",children:Object.entries($t).map(([r,a])=>n.jsx(Wt,{value:r,children:s(a.option)},r))})})},Wa=$e(M)`
  font-weight: ${({theme:t})=>t.fontWeights.semiBold};

  span {
    font-size: ${({theme:t})=>t.fontSizes[1]};
  }
`,xt="https://market-api.strapi.io";function Ua({npmPackageType:t,debouncedSearch:e,query:s,tabQuery:r,strapiVersion:a}){const{notifyStatus:i}=Ut(),{formatMessage:l}=_(),{toggleNotification:h}=De(),u=l({id:"global.marketplace",defaultMessage:"Marketplace"}),j=()=>{i(l({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:u}))},o={page:s?.page||1,pageSize:s?.pageSize||24},d={...r.plugin,pagination:o,search:e,version:a},{data:y,status:p}=Qe(["marketplace","plugins",d],async()=>{try{const Y=Ze.stringify(d),V=await fetch(`${xt}/plugins?${Y}`);if(!V.ok)throw new Error("Failed to fetch marketplace plugins.");return await V.json()}catch{}return null},{onSuccess(){j()},onError(){h({type:"danger",message:l({id:"notification.error",defaultMessage:"An error occured"})})}}),O={...r.provider,pagination:o,search:e,version:a},{data:z,status:Q}=Qe(["marketplace","providers",O],async()=>{const Y=Ze.stringify(O),V=await fetch(`${xt}/providers?${Y}`);if(!V.ok)throw new Error("Failed to fetch marketplace providers.");return await V.json()},{onSuccess(){j()},onError(){h({type:"danger",message:l({id:"notification.error",defaultMessage:"An error occured"})})}}),Z=t==="plugin"?y:z,E=Z?.meta.collections??{},se=y?.meta.categories??{},{pagination:re}=Z?.meta??{};return{pluginsResponse:y,providersResponse:z,pluginsStatus:p,providersStatus:Q,possibleCollections:E,possibleCategories:se,pagination:re}}const Xa=()=>{const t=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[e,s]=U.useState(t),r=()=>s(!0),a=()=>s(!1);return U.useEffect(()=>(window.addEventListener("online",r),window.addEventListener("offline",a),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}),[]),e},ee="plugin",ge="provider",Qa=()=>{const{formatMessage:t}=_(),{trackUsage:e}=xe(),{toggleNotification:s}=De(),[{query:r},a]=Qt(),i=rs(r?.search,500)||"",{autoReload:l,dependencies:h,useYarn:u,strapiVersion:j}=Zt("MarketplacePage",T=>T),o=Xa(),d=r?.npmPackageType||ee,[y,p]=U.useState({plugin:d===ee?{...r}:{},provider:d===ge?{...r}:{}});U.useEffect(()=>{e("didGoToMarketplace")},[e]),U.useEffect(()=>{l||s({type:"info",message:t({id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"})})},[s,l,t]);const{pluginsResponse:O,providersResponse:z,pluginsStatus:Q,providersStatus:Z,possibleCollections:E,possibleCategories:se,pagination:re}=Ua({npmPackageType:d,debouncedSearch:i,query:r,tabQuery:y,strapiVersion:j});if(!o)return n.jsx(Ha,{});const Y=T=>{const L=T===ee||T===ge?T:ee,be=y[L]&&Object.keys(y[L]).length;a(be?{...y[L],search:r?.search||"",npmPackageType:L,page:1}:{npmPackageType:L,collections:[],categories:[],sort:"name:asc",page:1,search:r?.search||""})},V=T=>{a({...T,page:1}),p(L=>({...L,[d]:{...L[d],...T}}))},ae=T=>{a({[T]:[],page:void 0},"remove"),p(L=>({...L,[d]:{}}))},we=({sort:T})=>V({sort:T}),de=Object.keys(h??{});return n.jsx(ue.Root,{children:n.jsxs(ce.Main,{children:[n.jsx(ce.Title,{children:t({id:"admin.pages.MarketPlacePage.head",defaultMessage:"Marketplace - Plugins"})}),n.jsx(Mt,{isOnline:o,npmPackageType:d}),n.jsx(ue.Content,{children:n.jsxs(J.Root,{variant:"simple",onValueChange:Y,value:d,children:[n.jsxs(I,{justifyContent:"space-between",paddingBottom:4,children:[n.jsxs(J.List,{"aria-label":t({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),children:[n.jsxs(J.Trigger,{value:ee,children:[t({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ",O?`(${O.meta.pagination.total})`:"..."]}),n.jsxs(J.Trigger,{value:ge,children:[t({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ",z?`(${z.meta.pagination.total})`:"..."]})]}),n.jsx(M,{width:"25%",children:n.jsx(Jt,{name:"searchbar",onClear:()=>a({search:"",page:1}),value:r?.search,onChange:T=>a({search:T.target.value,page:1}),clearLabel:t({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:t({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"}),children:t({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})})})]}),n.jsxs(I,{paddingBottom:4,gap:2,children:[n.jsx(qa,{sortQuery:r?.sort||"name:asc",handleSelectChange:we}),n.jsx(as,{npmPackageType:d,possibleCollections:E,possibleCategories:se,query:r||{},handleSelectChange:V,handleSelectClear:ae})]}),n.jsx(J.Content,{value:ee,children:n.jsx(vt,{npmPackages:O?.data,status:Q,installedPackageNames:de,useYarn:u,isInDevelopmentMode:l,npmPackageType:"plugin",strapiAppVersion:j,debouncedSearch:i})}),n.jsx(J.Content,{value:ge,children:n.jsx(vt,{npmPackages:z?.data,status:Z,installedPackageNames:de,useYarn:u,isInDevelopmentMode:l,npmPackageType:"provider",debouncedSearch:i})}),n.jsxs(Ee.Root,{...re,defaultPageSize:24,children:[n.jsx(Ee.PageSize,{options:["12","24","50","100"]}),n.jsx(Ee.Links,{})]}),n.jsx(M,{paddingTop:8,children:n.jsx("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>e("didMissMarketplacePlugin"),children:n.jsx(Kt,{title:t({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:t({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:n.jsx(es,{}),iconBackground:"alternative100",endAction:n.jsx(Pt,{fill:"neutral600",width:"1.2rem",height:"1.2rem",style:{marginLeft:"0.8rem"}})})})})]})})]})})},en=()=>{const t=Xt(e=>e.admin_app.permissions.marketplace?.main);return n.jsx(ce.Protect,{permissions:t,children:n.jsx(Qa,{})})};export{Qa as MarketplacePage,en as ProtectedMarketplacePage};
