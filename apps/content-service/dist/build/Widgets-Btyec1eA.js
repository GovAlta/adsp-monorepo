import{e as m,a as g,u as h,j as t,b as j,$ as f,ap as y,aq as L,ar as v,as as n,s as d,ae as C,I as D,a9 as k,at as A,au as T}from"./strapi-CZE0NOhr.js";import{W as c}from"./WidgetHelpers-CQjeCQVt.js";import{R as b}from"./RelativeTime-C4chDBgK.js";import{u as w,g as E}from"./getActionTypesDefaultMessages-DdN_1oc8.js";const M=m(b)`
  display: inline-block;

  &::first-letter {
    text-transform: uppercase;
  }
`,S=({items:s})=>{const{formatMessage:i}=g(),{trackUsage:e}=j(),l=f(),r=a=>`/settings/audit-logs?pageSize=${T}&page=1&sort=date:DESC&id=${a.id}`,p=a=>()=>{e("willOpenAuditLogDetailsFromHome");const o=r(a);l(o)};return t.jsx(y,{colCount:4,rowCount:s?.length??0,children:t.jsx(L,{children:s?.map(a=>{const o=i({id:`Settings.permissions.auditLogs.${a.action}`,defaultMessage:E(a.action)},{model:a.payload.model??""}),u=a.user?.displayName??"-";return t.jsxs(v,{onClick:p(a),cursor:"pointer",children:[t.jsx(n,{children:t.jsx(d,{title:o,variant:"omega",textColor:"neutral800",children:o})}),t.jsx(n,{children:t.jsx(d,{variant:"omega",textColor:"neutral800",children:t.jsx(M,{timestamp:new Date(a.date)})})}),t.jsx(n,{children:t.jsx(d,{title:u,variant:"omega",textColor:"neutral800",children:u})}),t.jsx(n,{onClick:x=>x.stopPropagation(),children:t.jsx(C,{display:"inline-block",children:t.jsx(D,{tag:k,to:r(a),onClick:()=>e("willOpenAuditLogDetailsFromHome"),label:i({id:"global.details",defaultMessage:"Details"}),variant:"ghost",children:t.jsx(A,{})})})})]},`lastActivity_auditLog_${a.id}`)})})})},N=()=>{const{formatMessage:s}=g(),[{query:i}]=h(),{data:e,isLoading:l,error:r}=w({...i,page:1,pageSize:4,sort:"date:DESC"},{refetchOnMountOrArgChange:!0});return l?t.jsx(c.Loading,{}):r||!e?.results?t.jsx(c.Error,{}):e.results.length===0?t.jsx(c.NoData,{children:s({id:"widget.last-activity.no-activity",defaultMessage:"No activity"})}):t.jsx(S,{items:e.results??[]})};export{N as AuditLogsWidget};
